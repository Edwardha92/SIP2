/*
 * Academic License - for use in teaching, academic research, and meeting
 * course requirements at degree granting institutions only.  Not for
 * government, commercial, or other organizational use.
 *
 * calculate_akf.cpp
 *
 * Code generation for function 'calculate_akf'
 *
 */

/* Include files */
#include "rt_nonfinite.h"
#include "generate_input_vector.h"
#include "calculate_akf.h"
#include "xcorr.h"

/* Function Definitions */
void calculate_akf(const double ecg_chunk[512], double akf[1023])
{
  int i0;
  double ecg[512];
  double dv1[1023];
  static const double dv2[512] = { 0.0, 1.3607682110658437E-5,
    5.4439641683917683E-5, 0.0001225226104617505, 0.00021790111474698226,
    0.00034063743552098513, 0.00049081155264489584, 0.00066852107318092491,
    0.00087388114388047, 0.0011070243478964875, 0.0013681005857874712,
    0.0016572769408911836, 0.0019747375291557373, 0.002320683333526502,
    0.002695332022997432, 0.0030989177564446913, 0.0035316909713715566,
    0.0039939181577021282, 0.00448588161677306, 0.0050078792056797022,
    0.0055602240671454028, 0.00614324434509006, 0.0067572828860850143,
    0.0074026969268888021, 0.0080798577682703321, 0.00878915043533171,
    0.009530973324554548, 0.010305737837800991, 0.01111386800350958,
    0.011955800085335512, 0.012831982178490679, 0.013742873794050793,
    0.014688945431501059, 0.015670678139802885, 0.016688563067269124,
    0.017743101000545526, 0.018834801893000554, 0.01996418438283553,
    0.021131775301231774, 0.022338109170859849, 0.023583727695081207,
    0.024869179238180016, 0.026195018296968381, 0.027561804964113673,
    0.028970104383544117, 0.030420486198291893, 0.031913523991140412,
    0.033449794718445648, 0.035029878137507728, 0.0366543562278729,
    0.038323812606949587, 0.040038831940327917, 0.041799999347194548,
    0.043607899801239206, 0.045463117527451843, 0.047366235395213174,
    0.049317834308084257, 0.051318492590702154, 0.053368785373193117,
    0.055469283973515027, 0.0576205552781437, 0.059823161121518628,
    0.062077657664666122, 0.064384594773417292, 0.066744515396640627,
    0.069157954944909089, 0.071625440670020746, 0.074147491045794239,
    0.076724615150558187, 0.079357312051754114, 0.082046070193071488,
    0.0847913667845327, 0.087593667195944053, 0.090453424354128037,
    0.093371078144349473, 0.096347054816346978, 0.09938176639537856,
    0.10247561009868729, 0.10562896775779011, 0.10884220524699185,
    0.11211567191851904, 0.11544970004466897, 0.11884460426736319,
    0.122300681055491, 0.12581820817042411, 0.12939744414008048,
    0.13303862774190744, 0.13674197749515454, 0.14050769116279421,
    0.14433594526344981, 0.14822689459368038, 0.15218067176096772,
    0.1561973867277443, 0.1602771263667945, 0.16441995402835569,
    0.16862590911923814, 0.17289500669427565, 0.17722723706041316,
    0.18162256539372831, 0.18608093136967779, 0.19060224880685067,
    0.19518640532450493, 0.19983326201415175, 0.20454265312544762,
    0.20931438576664468, 0.21414823961983898, 0.2190439666712522,
    0.22400129095676796, 0.22901990832294078, 0.23409948620368065,
    0.23923966341281225, 0.24444004995269408, 0.249700226839077,
    0.25501974594236837, 0.2603981298454619, 0.26583487171828041,
    0.27132943520916986, 0.2768812543532746, 0.28248973349801032,
    0.2881542472457439, 0.29387414041377719, 0.29964872801172349,
    0.30547729523635181, 0.311359097483967, 0.31729336038038125,
    0.32327927982852167, 0.32931602207371047, 0.33540272378663927,
    0.34153849216405474, 0.34772240504715429, 0.353953511057687,
    0.36023082975173981, 0.3665533517911802, 0.37292003913271488,
    0.37932982523451464, 0.38578161528034338, 0.39227428642112,
    0.39880668803382946, 0.40537764199769227, 0.41198594298748581,
    0.41863035878390581, 0.42530963060084348, 0.43202247342944161,
    0.43876757639878655, 0.44554360315308039, 0.45234919224512815,
    0.45918295754596355, 0.46604348867043066, 0.47292935141852355,
    0.47983908823228189, 0.48677121866802631, 0.49372423988371072,
    0.5006966271411587, 0.50768683432294126, 0.51469329446364376,
    0.5217144202952656, 0.52874860480647745, 0.53579422181546443,
    0.54284962655606461, 0.54991315627691206, 0.55698313085327933,
    0.564057853411309, 0.57113561096431886, 0.57821467506085122,
    0.58529330244413436, 0.59236973572261831, 0.59944220405123194,
    0.60650892382301347, 0.6135680993707473, 0.6206179236782462,
    0.62765657910089778, 0.63468223809510449, 0.64169306395622483,
    0.64868721156462694, 0.65566282813946308, 0.662618053999755,
    0.669551023332394, 0.67645986496663746, 0.68334270315469126,
    0.69019765835795888, 0.69702284803853043, 0.70381638745549213,
    0.71057639046561882, 0.7173009703280222, 0.72398824051231625,
    0.73063631550986219, 0.73724331164765267, 0.74380734790438985,
    0.75032654672831867, 0.75679903485635969, 0.76322294413410541,
    0.76959641233621978, 0.77591758398680077, 0.78218461117925264,
    0.78839565439521486, 0.79454888332210427, 0.80064247766881314,
    0.80667462797912171, 0.81264353644236842, 0.81854741770093742,
    0.8243844996541152, 0.830153024257868, 0.83585124832010516,
    0.84147744429097981, 0.84702990104779563, 0.85250692467407951,
    0.85790683923239008, 0.86322798753043362, 0.86846873188005735,
    0.87362745484870352, 0.87870256000290048, 0.8836924726433818,
    0.888595640531419, 0.89341053460596587, 0.89813564969121429,
    0.90276950519416232, 0.90731064579181242, 0.91175764210760779,
    0.91610909137673313, 0.92036361809990808, 0.92451987468530339,
    0.92857654207822415, 0.93253233037820671, 0.93638597944318092,
    0.94013625948036172, 0.94378197162353783, 0.947321948496433,
    0.95075505476182309, 0.95408018765610358, 0.9572962775090027,
    0.96040228824815277, 0.963397217888232, 0.96628009900440481,
    0.96904999918979373, 0.971706021496723, 0.97424730486149025,
    0.976673024512422, 0.97898239236098827, 0.981174657375751,
    0.98324910593894044, 0.98520506218545567, 0.987041888324098,
    0.988758984940859, 0.99035579128408935, 0.99183178553138884,
    0.99318648503806717, 0.99441944656703574, 0.9955302665, 0.996518581029833,
    0.99738406633402388, 0.99812643872909934, 0.99874545480593624,
    0.99924091154588368, 0.99961264641763292, 0.999860537454779,
    0.99998450331402966, 0.99998450331402966, 0.999860537454779,
    0.99961264641763292, 0.99924091154588368, 0.99874545480593624,
    0.99812643872909934, 0.99738406633402388, 0.996518581029833, 0.9955302665,
    0.99441944656703574, 0.99318648503806717, 0.99183178553138884,
    0.99035579128408935, 0.988758984940859, 0.987041888324098,
    0.98520506218545567, 0.98324910593894044, 0.981174657375751,
    0.97898239236098827, 0.976673024512422, 0.97424730486149025,
    0.971706021496723, 0.96904999918979373, 0.96628009900440481,
    0.963397217888232, 0.96040228824815277, 0.9572962775090027,
    0.95408018765610358, 0.95075505476182309, 0.947321948496433,
    0.94378197162353783, 0.94013625948036172, 0.93638597944318092,
    0.93253233037820671, 0.92857654207822415, 0.92451987468530339,
    0.92036361809990808, 0.91610909137673313, 0.91175764210760779,
    0.90731064579181242, 0.90276950519416232, 0.89813564969121429,
    0.89341053460596587, 0.888595640531419, 0.8836924726433818,
    0.87870256000290048, 0.87362745484870352, 0.86846873188005735,
    0.86322798753043362, 0.85790683923239008, 0.85250692467407951,
    0.84702990104779563, 0.84147744429097981, 0.83585124832010516,
    0.830153024257868, 0.8243844996541152, 0.81854741770093742,
    0.81264353644236842, 0.80667462797912171, 0.80064247766881314,
    0.79454888332210427, 0.78839565439521486, 0.78218461117925264,
    0.77591758398680077, 0.76959641233621978, 0.76322294413410541,
    0.75679903485635969, 0.75032654672831867, 0.74380734790438985,
    0.73724331164765267, 0.73063631550986219, 0.72398824051231625,
    0.7173009703280222, 0.71057639046561882, 0.70381638745549213,
    0.69702284803853043, 0.69019765835795888, 0.68334270315469126,
    0.67645986496663746, 0.669551023332394, 0.662618053999755,
    0.65566282813946308, 0.64868721156462694, 0.64169306395622483,
    0.63468223809510449, 0.62765657910089778, 0.6206179236782462,
    0.6135680993707473, 0.60650892382301347, 0.59944220405123194,
    0.59236973572261831, 0.58529330244413436, 0.57821467506085122,
    0.57113561096431886, 0.564057853411309, 0.55698313085327933,
    0.54991315627691206, 0.54284962655606461, 0.53579422181546443,
    0.52874860480647745, 0.5217144202952656, 0.51469329446364376,
    0.50768683432294126, 0.5006966271411587, 0.49372423988371072,
    0.48677121866802631, 0.47983908823228189, 0.47292935141852355,
    0.46604348867043066, 0.45918295754596355, 0.45234919224512815,
    0.44554360315308039, 0.43876757639878655, 0.43202247342944161,
    0.42530963060084348, 0.41863035878390581, 0.41198594298748581,
    0.40537764199769227, 0.39880668803382946, 0.39227428642112,
    0.38578161528034338, 0.37932982523451464, 0.37292003913271488,
    0.3665533517911802, 0.36023082975173981, 0.353953511057687,
    0.34772240504715429, 0.34153849216405474, 0.33540272378663927,
    0.32931602207371047, 0.32327927982852167, 0.31729336038038125,
    0.311359097483967, 0.30547729523635181, 0.29964872801172349,
    0.29387414041377719, 0.2881542472457439, 0.28248973349801032,
    0.2768812543532746, 0.27132943520916986, 0.26583487171828041,
    0.2603981298454619, 0.25501974594236837, 0.249700226839077,
    0.24444004995269408, 0.23923966341281225, 0.23409948620368065,
    0.22901990832294078, 0.22400129095676796, 0.2190439666712522,
    0.21414823961983898, 0.20931438576664468, 0.20454265312544762,
    0.19983326201415175, 0.19518640532450493, 0.19060224880685067,
    0.18608093136967779, 0.18162256539372831, 0.17722723706041316,
    0.17289500669427565, 0.16862590911923814, 0.16441995402835569,
    0.1602771263667945, 0.1561973867277443, 0.15218067176096772,
    0.14822689459368038, 0.14433594526344981, 0.14050769116279421,
    0.13674197749515454, 0.13303862774190744, 0.12939744414008048,
    0.12581820817042411, 0.122300681055491, 0.11884460426736319,
    0.11544970004466897, 0.11211567191851904, 0.10884220524699185,
    0.10562896775779011, 0.10247561009868729, 0.09938176639537856,
    0.096347054816346978, 0.093371078144349473, 0.090453424354128037,
    0.087593667195944053, 0.0847913667845327, 0.082046070193071488,
    0.079357312051754114, 0.076724615150558187, 0.074147491045794239,
    0.071625440670020746, 0.069157954944909089, 0.066744515396640627,
    0.064384594773417292, 0.062077657664666122, 0.059823161121518628,
    0.0576205552781437, 0.055469283973515027, 0.053368785373193117,
    0.051318492590702154, 0.049317834308084257, 0.047366235395213174,
    0.045463117527451843, 0.043607899801239206, 0.041799999347194548,
    0.040038831940327917, 0.038323812606949587, 0.0366543562278729,
    0.035029878137507728, 0.033449794718445648, 0.031913523991140412,
    0.030420486198291893, 0.028970104383544117, 0.027561804964113673,
    0.026195018296968381, 0.024869179238180016, 0.023583727695081207,
    0.022338109170859849, 0.021131775301231774, 0.01996418438283553,
    0.018834801893000554, 0.017743101000545526, 0.016688563067269124,
    0.015670678139802885, 0.014688945431501059, 0.013742873794050793,
    0.012831982178490679, 0.011955800085335512, 0.01111386800350958,
    0.010305737837800991, 0.009530973324554548, 0.00878915043533171,
    0.0080798577682703321, 0.0074026969268888021, 0.0067572828860850143,
    0.00614324434509006, 0.0055602240671454028, 0.0050078792056797022,
    0.00448588161677306, 0.0039939181577021282, 0.0035316909713715566,
    0.0030989177564446913, 0.002695332022997432, 0.002320683333526502,
    0.0019747375291557373, 0.0016572769408911836, 0.0013681005857874712,
    0.0011070243478964875, 0.00087388114388047, 0.00066852107318092491,
    0.00049081155264489584, 0.00034063743552098513, 0.00021790111474698226,
    0.0001225226104617505, 5.4439641683917683E-5, 1.3607682110658437E-5, 0.0 };

  /* CALCULATE_AKF multiplies the time based ecg_chunk and calculates its */
  /* auto-correlation which is returned. */
  for (i0 = 0; i0 < 512; i0++) {
    ecg[i0] = ecg_chunk[i0] * dv2[i0];
  }

  xcorr(ecg, ecg, dv1);
  memcpy(&akf[0], &dv1[0], 1023U * sizeof(double));
}

/* End of code generation (calculate_akf.cpp) */
